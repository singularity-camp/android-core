# Kotlin DSL

Koin является библиотекой, написанной на чистом Kotlin-e, что является несомненным плюсом для нас, как Андродид разработчиков. Это позволяет использовать фичи котлина. Одна из фич, это использования **Kotlin DSL** при объявлении зависимостей.

Языки программирования можно разделить на 2 типа: универсальные языки (general-purpose programming language) и предметно-ориентированные (domain-specific language). Популярные примеры DSL — это SQL, регулярные выражения, build.gradle. Язык уменьшает объем предоставляемой функциональности, но при этом он способен эффективно решать определенную проблему. Это способ описать программу не в императивном стиле (как нужно получить результат), а в декларативном или близком к декларативному (описать текущую задачу), в таком случае решение проблемы будет получено исходя из заданной информации.

Давайте перечислим основные преимущества Kotlin, которые позволяют достаточно чисто писать на этом языке и доступны для построения собственного DSL. Ниже представлена таблица с основными улучшениями синтаксиса языка, которые стоит использовать.


| Название функциональности   | DSL синтаксис                                                                                   | Обычный синтаксис                                                                  |
| --------------------------------------------------- | -------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------- |
| Переопределение операторов | `collection += element`                                                                                  | `collection.add(element)`                                                                          |
| Псевдонимы типа                       | `typealias Point = Pair<Int, Int>`                                                                       | Создание пустых классов-наследников и прочие костыли |
| Соглашение для get/set методов  | `map["key"] = "value"`                                                                                   | `map.put("key", "value")`                                                                          |
| Мульти-декларации                   | `val (x, y) = Point(0, 0)`                                                                               | `val p = Point(0, 0); val x = p.first; val y = p.second`                                           |
| Лямбда за скобками                  | `list.forEach { ... }`                                                                                   | `list.forEach({...})`                                                                              |
| Extention функции                            | `mylist.first(); // метод first() отсутствует в классе коллекции mylist` | Утилитные функции                                                                  |
| Infix функции                                | `1 to "one"`                                                                                             | `1.to("one")`                                                                                      |
| Лямбда с обработчиком            | `Person().apply { name = «John» }`                                                                     | Нет                                                                                             |
| Контролирование контекста   | `@DslMarker`                                                                                             | Нет                                                                                             |
