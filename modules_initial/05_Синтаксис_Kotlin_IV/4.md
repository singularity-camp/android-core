<h1>Функции расширения (Extensions)</h1>

<p>Функции расширения позволяют добавить функционал к уже определенным типам. При этом типы могут быть определены где-то в другом месте, например, в стандартной библиотеке (Kotlin, Android).</p>

<p>Функция расширения определяется следующим образом:</p>

<pre><code>fun тип.имя_функции(параметры) : возвращаемый_тип{
    тело функции
}</code></pre>

<p>По большому счету определение аналогично определению обычной функции за тем исключением, что после слова fun идет название типа, для которого определяется функция, и через точку название функции.</p>

<p>Определим пару функций расширения к стандартным типам <strong>Int</strong> и <strong>String</strong>:</p>

<pre><code>fun main() {
    println("hello world".letterCount('l'))   // 3
    println(4.square())                       // 16
}
 
fun String.letterCount(c: Char) : Int{
    var count = 0
    for(n in this){
        if(n == c) count++
    }
    return count
}
fun Int.square(): Int{
    return this * this
}</code></pre>

<p>Для типа Int определена функция возведения в квадрат. В каждой функции расширения через ключевое слово <strong>this</strong> мы можем ссылаться на текущий объект того типа, для которого создается функция. Например, в функции:</p>

<pre><code>fun Int.square(): Int{
    return this * this
}</code></pre>

<p>Через <strong>this</strong> обращаемся к тому объекту, для которого будет вызывться функция. И затем вы можем вызвать ее следующим образом: </p>

<pre><code>4.square()  // 16</code></pre>

<p>Следует учитывать, что функции расширения не переопределяют функции, которые уже определены в классе. Если функция расширения имеет ту же сигнатуру, что и уже имеющаяся функция класса, то компилятор просто будет игнорировать подобную функцию расширения. </p>