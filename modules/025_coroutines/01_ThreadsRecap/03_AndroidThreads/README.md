# Потоки в Андроид

Когда впервые мы открываем приложение, система запускает процесс, в котором запускается UI поток нашего приложения. В этом потоке инициализируются все компоненты и происходит рендеринг вьюшек для отображения. Помните, что отрисовка вашей вью не должна быть тяжеловесной операцией. Тяжеловесной она будет считаться, если время отрисовки будет больше 16мс (60 fps). В главном потоке запрещается обращаться к запросам в сеть, как и обновлять состояния view из других потоков. То есть результат запроса в сеть должен быть обработан в UI потоке для отображения. Иначе при попытке изменить view из другого потока будет краш.

Для того, чтобы вынести определенную работу в отдельный поток есть разные механизмы в андроид:

* Thread. Можем создать поток и передать в него Runnable, который содержит логику для отработки:

```
Thread {// do some work}.start()
```

* AsyncTask. Этот подход был раньше популярен, однако требовал написания большего количества кода и по неосторожности разработчиков был причиной множества утечек памяти. AsyncTask-и сложны в написании и чтении, но самое главное, сейчас помечены как **deprecated**.
* Loaders. Имеют те же недостатки как и AsyncTask, однако были созданы для работы с ЖЦ активити/фрагмента. Также deprecated c API 28.
* RxJava. RxJava больше про асинхронность, нежели многопоточность  Библиотека привносить много неиспользуемого кода, что влияет на build time и размер APK  Сложен в понимании из-за реактивного подхода  Callback Hell.
